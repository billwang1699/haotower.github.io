window.__require=function o(t,e,n){function i(c,s){if(!e[c]){if(!t[c]){var h=c.split("/");if(h=h[h.length-1],!t[h]){var a="function"==typeof __require&&__require;if(!s&&a)return a(h,!0);if(r)return r(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var d=e[c]={exports:{}};t[c][0].call(d.exports,function(o){return i(t[c][1][o]||o)},d,d.exports,o,t,e,n)}return e[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({block:[function(o,t,e){"use strict";cc._RF.push(t,"52f3520psBIm5VcOvp6lAxA","block"),cc.Class({extends:cc.Component,properties:{colorAtlas:cc.SpriteAtlas},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this)},init:function(o){this.node.getComponent(cc.Sprite).spriteFrame=this.colorAtlas.getSpriteFrame(o),this.node.width=80+45*o},onTouchStart:function(o){this.canMove=!0,this.startPos=this.node.position;var t=window.game.blockNodeArr[this.node.baseIndex];this.node.blockIndex!=t[t.length-1].blockIndex&&(this.canMove=!1)},onTouchMove:function(o){if(this.canMove){var t=o.getDelta();this.node.x+=t.x,this.node.y+=t.y}},onTouchEnd:function(o){this.canMove&&(window.game.placeBlock(this.node)||(this.node.position=this.startPos))},start:function(){},update:function(o){}}),cc._RF.pop()},{}],game:[function(o,t,e){"use strict";cc._RF.push(t,"38d9dc5UylNA73CVOtGEbti","game"),cc.Class({extends:cc.Component,properties:{blockLayerNode:cc.Node,blockPrefab:cc.Prefab,baseNodeArr:[cc.Node]},onLoad:function(){window.game=this,this.blockNodeArr=[[],[],[]],this.blockNum=3,this.initBlock(this.blockNum)},initBlock:function(o){o>=6&&(o=6);for(var t=0;t<this.blockNodeArr.length;t++)for(var e=this.blockNodeArr[t],n=0;n<e.length;n++)e[n].destroy();this.blockNodeArr=[[],[],[]];for(var i=0;i<o;i++){var r=cc.instantiate(this.blockPrefab);this.blockLayerNode.addChild(r),r.x=this.baseNodeArr[0].x,r.y=50*i-160;var c=o-i-1;r.baseIndex=0,r.blockIndex=c,r.getComponent("block").init(c),this.blockNodeArr[0].push(r)}},baseIndexCheck:function(o){for(var t=0;t<this.baseNodeArr.length;t++){var e=this.baseNodeArr[t];if(o.x>=e.x-e.width/2&&o.x<=e.x+e.width/2)return t}return-1},placeBlock:function(o){var t=this.baseIndexCheck(o.position);if(-1==t)return!1;if(o.baseIndex==t)return!1;var e=this.blockNodeArr[t];if(e.length&&e[e.length-1].blockIndex<o.blockIndex)return!1;var n=this.baseNodeArr[t];o.x=n.x,this.blockNodeArr[o.baseIndex].pop(),this.blockNodeArr[t].push(o),o.baseIndex=t;var i=this.blockNodeArr[t].length;return o.y=50*(i-1)-160,this.blockNodeArr[2].length==this.blockNum&&(console.log("\u606d\u559c\u904e\u95dc\u4e86!!"),this.initBlock(++this.blockNum)),!0},start:function(){},update:function(o){}}),cc._RF.pop()},{}],scene:[function(o,t,e){"use strict";cc._RF.push(t,"1d6a6dbqFpBm6jvpJPoqWLQ","scene"),cc.Class({extends:cc.Component,properties:{blockLayerNode:cc.Node,blockPrefab:cc.Prefab,baseNodeArr:[cc.Node]},onLoad:function(){window.game=this,this.initBlock(6)},initBlock:function(o){for(var t=0;t<o;t++){var e=cc.instantiate(this.blockPrefab);this.blockLayerNode.addChild(e),e.x=this.baseNodeArr[0].x,e.y=50*t-160,e.getComponent("block").init(o-t-1)}},baseIndexCheck:function(o){for(i=0;i<this.baseNodeArr.length;i++){var t=this.baseNodeArr[i];if(o.x>=t.x-t.width/2&&o.x<=t.x+t.width/2)return i}return-1},placeBlock:function(o){var t=this.baseIndexCheck(e.position);if(-1==t)return!1;var e=this.baseNodeArr[t];return e.x=baseNode.x,!0},start:function(){},update:function(o){}}),cc._RF.pop()},{}]},{},["block","game","scene"]);